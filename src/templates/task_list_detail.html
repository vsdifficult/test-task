{% extends 'base.html' %}
{% load static %}

{% block title %}Task List Detail{% endblock %}

{% block content %}
<h2>{{ task_list.name }}</h2>
<p>{{ task_list.description }}</p>

<h3>Tasks</h3>
<ul id="tasks-list">
    {% for task in tasks %}
        <li data-task-id="{{ task.id }}">
            <strong>{{ task.title }}</strong> - Assigned to: {{ task.assigned_to.username }} - Due: {{ task.due_date }} - Completed: <span class="completed-status">{{ task.completed|yesno:"Yes,No" }}</span>
            <button class="complete-btn" data-task-id="{{ task.id }}">Mark Complete</button>
        </li>
    {% endfor %}
</ul>

<h3>Create New Task</h3>
<form id="create-task-form">
    {% csrf_token %}
    <label for="title">Title:</label>
    <input type="text" id="title" name="title" required>
    <label for="description">Description:</label>
    <textarea id="description" name="description"></textarea>
    <label for="assigned_to">Assign to (username):</label>
    <input type="text" id="assigned_to" name="assigned_to">
    <label for="due_date">Due Date:</label>
    <input type="datetime-local" id="due_date" name="due_date">
    <button type="submit">Create Task</button>
</form>

<a href="{% url 'task_lists' %}">Back to Task Lists</a>
{% endblock %}

{% block extra_js %}
<script>
    // Pass task_list_id to JS
    const taskListId = "{{ task_list.id }}";
</script>
<script src="{% static 'js/app.js' %}"></script>
{% endblock %}
